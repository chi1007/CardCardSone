<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="{{ url_for('static', filename='image/icon/Croissant1.png') }}">
  <title>卡卡頌 CardCardSone</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/preference_question.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}">
  <script>
     function validateForm() {
         const totalQuestions = {{ questions|length }};
         let isAllAnswered = true;
         for (let i = 0; i < totalQuestions; i++) {
             const answers = document.getElementsByName("q" + i);
             let answered = false;
             for (let j = 0; j < answers.length; j++) { 
                 if (answers[j].checked) {
                     answered = true;
                     break;
                 }
             }
             if (!answered) {
                 isAllAnswered = false;
                 break;
             }
         }
         if (!isAllAnswered) {
             alert("尚有題目未填答，請確認均填答完畢後再送出「提交」。");
         }
         return isAllAnswered;
     }

     document.addEventListener('DOMContentLoaded', function () {
      const form = document.querySelector('form');
      form.addEventListener('submit', function (event) {
        if (validateForm()) {
          document.getElementById('loading').style.display = 'block';
        } else {
          event.preventDefault();
        }
      });
    });
   </script>
</head>

<body>

  <button class="back-to-top" onclick="scrollToTop()"> <b>↑</b> </button>

  <div class="header-container">
    <header class="header">
      <div class="logo">
        <img src="{{ url_for('static', filename='image/icon/Croissant1.png') }}" alt="icon" width="50" height="50">
        <a href="/">卡卡頌 CardCardSone</a>
      </div>
      <nav>
        <ul class="nav">
          <li class="nav-item"><a href="/guide" class="nav-link">小白指南</a></li>
          <li class="nav-item">
            <a href="#" class="nav-link">卡片介紹▾</a>
            <ul class="dropdown-menu">
              <li><a href="/PopularCreditCards">熱門信用卡</a></li>
              <li><a href="/PopularDebitCards">熱門金融卡</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">卡片比較▾</a>
            <ul class="dropdown-menu">
              <li><a href="/CreditComparison">信用卡比較</a></li>
              <li><a href="/DebitComparison">金融卡比較</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="/recommend" class="active-nav-item nav-link">智能推薦</a>
            <div class="active-nav-underline"></div></li>
          <li class="nav-item"><a href="/news" class="nav-link">最新消息</a></li>
          <li class="nav-item"><a href="/contact" class="nav-link">關於我們</a></li>
        </ul>
      </nav>
    </header>
  </div>

    <div class="form-container">
    <h1>信用卡/金融卡推薦系統</h1>
    <form action="/recommend" method="POST" onsubmit="return validateForm()">
        <!-- 第一題只有三個選項，使用單選框 -->
        <p>{{ questions[0].question }}</p>
        <span class="inline-flex items-center">
            <input type="radio" id="q0_1" name="q0" value="1" class="form-radio h-5 w-5 text-blue-600" required>
            <label for="q0_1" class="ml-2">信用卡</label>
        </span>
        <span class="inline-flex items-center">
            <input type="radio" id="q0_2" name="q0" value="2" class="form-radio h-5 w-5 text-blue-600" required>
            <label for="q0_2" class="ml-2">無特定偏好</label>
        </span>
        <span class="inline-flex items-center">
            <input type="radio" id="q0_3" name="q0" value="3" class="form-radio h-5 w-5 text-blue-600" required>
            <label for="q0_3" class="ml-2">金融卡</label>
        </span><br>
            <!-- 其他問題使用單選框 -->
        {% for question in questions[1:] %}
        <p>{{ question.question }}</p>
        <span class="inline-flex items-center">
             <input type="radio" id="q{{ loop.index }}_1" name="q{{ loop.index }}" value="1" class="form-radio h-5 w-5 text-blue-600">
             <label for="q{{ loop.index }}_1" class="ml-2">非常不重要</label>
        </span>
        <span class="inline-flex items-center">
             <input type="radio" id="q{{ loop.index }}_2" name="q{{ loop.index }}" value="2" class="form-radio h-5 w-5 text-blue-600">
             <label for="q{{ loop.index }}_2" class="ml-2">不重要</label>
        </span>
        <span class="inline-flex items-center">
             <input type="radio" id="q{{ loop.index }}_3" name="q{{ loop.index }}" value="3" class="form-radio h-5 w-5 text-blue-600">
             <label for="q{{ loop.index }}_3" class="ml-2">普通</label>
        </span>
        <span class="inline-flex items-center">
             <input type="radio" id="q{{ loop.index }}_4" name="q{{ loop.index }}" value="4" class="form-radio h-5 w-5 text-blue-600">
             <label for="q{{ loop.index }}_4" class="ml-2">重要</label>
        </span>
        <span class="inline-flex items-center">
             <input type="radio" id="q{{ loop.index }}_5" name="q{{ loop.index }}" value="5" class="form-radio h-5 w-5 text-blue-600">
             <label for="q{{ loop.index }}_5" class="ml-2">非常重要</label>
        </span><br>
        {% endfor %}
        <br>
        <input type="submit" value="提交">
    </form>
  </div>

  <div id="loading">
    <img src="{{ url_for('static', filename='image/icon/loading-dog.gif') }}" alt="Loading...">
    <p>分析生成中，請稍候</p>
  </div>

<footer class="container-footer">

  <script src="{{ url_for('static', filename='js/common.js') }}"></script>

<p>© 2024 卡卡頌 | <a href="#" style="color:#ffde99;">隱私政策</a> | <a href="#" style="color:#ffde99;">使用條款</a></p>
<p>地址：台北市和平東路一段155號三樓</p>
<p>電話：(02) 1234-5678</p>
<p>電子郵件：<a href="cardcardsone@gmail.com" style="color:#ffde99;">cardcardsone@gmail.com</p>

</footer>
</body>
</html>